<!DOCTYPE html>

{% load static %}
<html lang="en">

<head>

<style>
.button {
  background-color: #02b854;
  border: none;
  color: white;
  text-shadow: blue;
  padding: 10px 10px;
  text-align: justify;
  display: inline-block;
  font-size: 10px;
  margin: 2px 2px;
  cursor: pointer;
  height: 28px;
}

.searchicon {
  float: left;
  margin-top: -20px;
  position: relative;
  pointer-events: none;
  top: 26px;
  left: 8px;
  color: white;
  z-index: 2;
}

.extand {
  width: 18.4%;
  color: rgb(117, 180, 235);
  box-sizing: border-box;
  border: 1px solid grey ;
  border-radius: 4px;
  font-size: 16px;
  text-align: center;
  background: rgb(255, 255, 255);
  background-position: 10px 10px;
  background-repeat: no-repeat;
  -webkit-transition: width 0.4s ease-in-out;
  transition: width 0.4s ease-in-out;
}

.extand:focus {
  width: 50%;
  background: white;
  color: rgb(70, 69, 69);
}
.extand:focus + span{
  display:none;
}
  </style>
      <script src=  
      "https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js">  
          </script>  
          
          <script src=  
      "https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js">  
          </script>  
          
          <link href=  
      "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css"
              rel="stylesheet" type="text/css" /> 

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">
  <link rel="stylesheet" href="C:\Users\tnkri\PycharmProjects\covidmanagement\covidmanagement\templates\covidfeed\posts.html">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script>
$(document).ready(function () {
    $('body').keypress(function (e) {
        if (e.keyCode == 13) {
            e.preventDefault();
            $("#importButton").click();
        }
    });
});

$(document).ready(function() {

var data = {};
$("#search_district option").each(function(i,el) {  
   data[$(el).data("value")] = $(el).val();
});
console.log(data, $("#search_district option").val());

    $('#submit').click(function()
    {
        var value = $('#selected').val();
        $('#search_district [value="' + value + '"]').data('value')
        document.getElementById("selected").value = $('#search_district [value="' + value + '"]').data('value');
    });
});
    </script>

  <title>Bootstrap Theme</title>
</head>

<body>
  <nav class="navbar navbar-expand-sm navbar-dark bg-dark p-0">
    <div class="container">
      <a href="index.html" class="navbar-brand">CovidCryIndia</a>
      <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav">
          <li class="nav-item px-2">
            <a href="{%url 'covidfeed' %}" class="nav-link">Covid Dashboard</a>
          </li>
          <li class="nav-item px-2">
            <a href="{% url 'vaccination' %}" class="nav-link active">Vaccination</a>
          </li>
          <li class="nav-item px-2">
            <a href="categories.html" class="nav-link">News</a>
          </li>
          <li class="nav-item px-2">
            <a href="users.html" class="nav-link">Donation</a>
          </li>
          <li class="nav-item px-2">
            <a href="users.html" class="nav-link">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HEADER -->
  <header id="main-header" class="py-2 bg-primary text-white">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h1>
            <i class="fas fa-pencil-alt"></i> Vaccination</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- SEARCH -->
  <section id="search" class="py-4 mb-4 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-md-4 ml-auto">
          <form method="GET" action="district">
          <div class="input-group">
            <input list=search_district name='district_id' type="search" id='selected'  class="form-control" placeholder="Search Districts...">
            <datalist id="search_district">
              {% for data in district_list %}
              <option data-value="{{ data.district_id}}" value="{{ data.district_name }}"> 
               {% endfor %}
            </datalist>
            <div class="input-group-append">
              <button type='submit' id='submit' class="btn btn-primary">&#128269;</button>
            </div>
          </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- POSTS -->
  <section id="posts">
    <div class="container">
      <div class="row">
        <div class="col">
          {% if total_state_availability %}
          <div class="card">
            <div class="card-header">
              <h4>Latest Vaccination Report</h4>
            </div>
            
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th>#</th>
                  <th>State</th>
                  <th>Availability</th>
                  <th>From Date</th>
                </tr>
              </thead>
              <tbody>
                {% for data in total_state_availability %}
                <tr>
                  <td>{{ data.state_id }}</td>
                  <td><a href="{{request.build_absolute_uri}}state?state_id={{ data.state_id }}">{{ data.state_name }}</a></td>
                  <td>{{ data.available_capacity }}</td>
                  <td>{{ data.available_date }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          {% elif hospital_list %}

          <div class="card">
            <div class="card-header">
              <h4>Latest Vaccination Report</h4>
            </div>
            
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
              
                  <th>Hospital Name</th>
                  <th>Availability</th>
                  <th>From Date</th>
                  <th>Vaccine</th>
                  <th>Notify</th>
                  
                </tr>
              </thead>
              <tbody>
                {% for data in hospital_list %}
                <tr>
                  <td>{{ data.name }}</td>
                  <td>{{ data.available_capacity__sum }}</td>
                  <td>{{ data.min }}</td>
                  <td>{{ data.vaccine }}</td>
                  <td>
                    <form class="back">
                      <input type="text" name="search" class="extand" placeholder="Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Email'">
                      <input type="button" class="button" value="✓">
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          {% elif district_details %}

          <div class="card">
            <div class="card-header">
              <h4>Latest Vaccination Report</h4>
            </div>
            
            <table class="table table-striped">
              <thead class="thead-dark">
                <tr>
              
                  <th>District Name</th>
                  <th>Availability</th>
                  <th>From Date</th>
                  <th>Notify</th>
                  
                </tr>
              </thead>
              <tbody>
                {% for data in district_details %}
                <tr>
                  <td><a href="http://127.0.0.1:8000/vaccination/district?district_id={{ data.district_id }}">{{ data.district_name }}</a></td>
                  <td>{{ data.available_capacity__sum }}</td>
                  <td>{{ data.min }}</td>
                  <td>
                    <form class="back" method='POST'>
                      {{ form.as_p}}
                      {% csrf_token %}
                      <input type="text" name="email" class="extand" placeholder="Email" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Email'">
                      <button type='submit' id='submit' value="✓" class="button">&#10003;</button>
                      <input type="hidden" class="button" name='district_id' value="{{ data.district_name }}">
                    </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer id="main-footer" class="bg-dark text-white mt-5 p-5">
    <div class="container">
      <div class="row">
        <div class="col">
          <p class="lead text-center">
            Copyright &copy;
            <span id="year"></span>
            MissionDeed
          </p>
        </div>
      </div>
    </div>
  </footer>

  <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>


  <script>
    // Get the current year for the copyright
    $('#year').text(new Date().getFullYear());
  </script>
</body>

</html>